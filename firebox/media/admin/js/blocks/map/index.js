!function(){var e={894:function(){const e="SET_BREAKPOINT",t={breakpoint:"desktop"};wp.data.select("fpframework-breakpoints")||wp.data.registerStore("fpframework-breakpoints",{reducer(r=t,o){return o.type===e?{...r,breakpoint:o.breakpoint}:r},actions:{onBreakpointSet:t=>({type:e,breakpoint:t})},selectors:{getBreakpoint:e=>e.breakpoint}})},184:function(e,t){var r;!function(){"use strict";var o={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var n=typeof r;if("string"===n||"number"===n)e.push(r);else if(Array.isArray(r)){if(r.length){var l=a.apply(null,r);l&&e.push(l)}}else if("object"===n){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var i in r)o.call(r,i)&&r[i]&&e.push(i)}}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},703:function(e,t,r){"use strict";var o=r(414);function a(){}function n(){}n.resetWarningCache=a,e.exports=function(){function e(e,t,r,a,n,l){if(l!==o){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:n,resetWarningCache:a};return r.PropTypes=r,r}},697:function(e,t,r){e.exports=r(703)()},414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},192:function(e,t){var r;!function(){"use strict";var o={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var n=typeof r;if("string"===n||"number"===n)e.push(r);else if(Array.isArray(r)){if(r.length){var l=a.apply(null,r);l&&e.push(l)}}else if("object"===n){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var i in r)o.call(r,i)&&r[i]&&e.push(i)}}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},281:function(e,t,r){"use strict";var o=r(889);function a(){}function n(){}n.resetWarningCache=a,e.exports=function(){function e(e,t,r,a,n,l){if(l!==o){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:n,resetWarningCache:a};return r.PropTypes=r,r}},277:function(e,t,r){e.exports=r(281)()},889:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},t={};function r(o){var a=t[o];if(void 0!==a)return a.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e,t=window.wp.blocks,o=window.React,a=window.wp.i18n,n=window.lodash,l=new Uint8Array(16);function i(){if(!e&&!(e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(l)}for(var s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,c=[],p=0;p<256;++p)c.push((p+256).toString(16).substr(1));var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&s.test(e)}(r))throw TypeError("Stringified UUID is invalid");return r},d=function(e,t,r){var o=(e=e||{}).random||(e.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){r=r||0;for(var a=0;a<16;++a)t[r+a]=o[a];return t}return u(o)},m=window.wp.blockEditor,f=window.wp.element,b=window.wp.components,g=window.wp.data,k=r(184),h=r.n(k),v=r(697),_=r.n(v),w=({label:e,disableAlpha:t=!1,wrapperClass:r="",value:n,help:l="",defaultValue:i="",onChange:s})=>{const[c,p]=(0,f.useState)(!1),[u,d]=(0,f.useState)(!1),m=(0,g.useSelect)((e=>e("core/block-editor").getSettings().colors));return(0,o.createElement)("div",{className:"components-base-control"},(0,o.createElement)("div",{className:`wp-block-fpframework-color-selector-settings-container ${r}`},(0,o.createElement)("div",{className:"inner"},e&&(0,o.createElement)("span",{className:"wp-block-fpframework-color-selector-label"},e),(0,o.createElement)("div",{className:"actions"},n&&n!==i&&(0,o.createElement)(b.Tooltip,{text:(0,a.__)("Reset","fpf-framework")},(0,o.createElement)(b.Button,{className:"components-color-palette__clear",type:"button",onClick:()=>{s(i)},isSmall:!0},(0,o.createElement)(b.Dashicon,{icon:"redo"}))),(0,o.createElement)("div",{className:"wp-block-fpframework-color-selector-color-click"},c&&(0,o.createElement)(f.Fragment,null,(0,o.createElement)(b.Popover,{position:"top left",className:"wp-block-fpframework-popover-color",onClose:()=>p(!1)},(0,o.createElement)(b.ColorPicker,{key:u,color:n,onChangeComplete:e=>{if(e.rgb&&1===e.rgb.a||t)s(e.hex);else{const{r:t,g:r,b:o,a:a}=e.rgb;s(`rgba(${t}, ${r}, ${o}, ${a})`)}},disableAlpha:!1}),m.length>0&&(0,o.createElement)("div",{className:"components-color-palette"},m.map((e=>(0,o.createElement)("div",{key:e.slug,className:"components-color-palette__item-wrapper"},(0,o.createElement)(b.Button,{type:"button",className:"components-color-palette__item "+(n===e.color?"is-active":""),onClick:()=>{s(e.color),d((e=>!e))},style:{backgroundColor:e.color,color:e.color},"aria-label":e.name?
// translators: %s: The name of the color i.e.: "blue".
// translators: %s: The name of the color i.e.: "blue".
(0,a.sprintf)((0,a.__)("Color: %s"),name):
// translators: %s: color hex code i.e.: "#ffffff".
// translators: %s: color hex code i.e.: "#ffffff".
(0,a.sprintf)((0,a.__)("Color hex code: %s"),e),"aria-pressed":e.color===n}),e.color===n&&(0,o.createElement)(b.Dashicon,{icon:"saved"}))))),(0,o.createElement)("div",{className:"wp-block-fpframework-color-selector-popover-footer"},(0,o.createElement)(b.Button,{isSecondary:!0,isSmall:!0,disabled:!n,onClick:()=>s(i)},(0,a.__)("Clear","fpf-framework"))))),(0,o.createElement)(b.Tooltip,{text:(0,a.__)("Select Color","fpf-framework")},(0,o.createElement)(b.Button,{className:"wp-block-fpframework-color-selector-icon-indicator",onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onClick:()=>{p((e=>!e))}},(0,o.createElement)(b.ColorIndicator,{className:"wp-block-fpframework-color-selector-indicator"+(""===n?" is-empty":""),colorValue:n})))))),l&&(0,o.createElement)("div",{className:"wp-block-fpframework-color-selector-help"},l)))},E=r(192),y=r.n(E);r(894);var x=({children:e,childrenClass:t="",wrapperClass:r=""})=>{const a=(0,g.useSelect)((e=>e("fpframework-breakpoints").getBreakpoint())),{onBreakpointSet:n}=(0,g.useDispatch)("fpframework-breakpoints");return(0,o.createElement)("div",{className:`components-base-control wp-block-fpframework-responsive-control-wrap ${r}`},(0,o.createElement)("div",{className:"wp-block-fpframework-responsive-control-wrap-buttons"},[{value:"desktop",icon:"desktop"},{value:"tablet",icon:"tablet"},{value:"mobile",icon:"smartphone"}].map(((e,t)=>(0,o.createElement)("button",{key:t,onClick:()=>n(e.value),className:y()({"wp-block-fpframework-responsive-control-wrap-button":!0,active:e.value===a})},(0,o.createElement)("span",{className:`dashicons dashicons-${e.icon}`}))))),(0,o.createElement)("div",{className:t},e(a)))},C=({setAttributes:e,attributeKey:t,attributes:r,label:n,breakpoint:l,positionsLabels:i=[],positions:s=["top","right","bottom","left"]})=>{const c=r[t],p=s[0],u=s[1],d=s[2],m=s[3],f=r[t]?.linked;return(0,o.createElement)("div",{className:"wp-block-fpframework-control-spacing components-base-control"},(0,o.createElement)("p",{className:"wp-block-fpframework-control-spacing-label"},n),(0,o.createElement)("div",{className:"wp-block-fpframework-control-spacing-controls-wrap"},(0,o.createElement)("div",{className:"wp-block-fpframework-control-spacing-controls"},s.map(((r,a)=>{var n;return(0,o.createElement)("div",{key:a,className:"wp-block-fpframework-spacing-controls-item"},(0,o.createElement)(b.TextControl,{value:l?c[l][r]:c[r],type:"number",min:-200,max:200,step:1,onChange:o=>((r,o)=>{if(l)return f?void e({[t]:{...c,[l]:{...c[l],[p]:r,[u]:r,[d]:r,[m]:r}}}):void e({[t]:{...c,[l]:{...c[l],[o]:r}}});e(f?{[t]:{...c,[p]:r,[u]:r,[d]:r,[m]:r}}:{[t]:{...c,[o]:r}})})(o,r)}),(0,o.createElement)("p",{className:"label",dangerouslySetInnerHTML:{__html:null!==(n=i[r])&&void 0!==n?n:r}}))}))),(0,o.createElement)(b.Button,{isSecondary:!f,isPrimary:f,className:"components-toolbar__control",label:(0,a.__)("Link Values","fpf-framework"),icon:"admin-links",onClick:()=>{e({[t]:{...c,linked:!f}})}})))},S=r(277),T=r.n(S);const O={attributes:T().object.isRequired,setAttributes:T().func.isRequired,attributePrefix:T().string,maxBorderWidth:T().number,showBorderRadius:T().bool,defaultValues:T().shape({color:T().string,radius:T().object,width:T().string})},N=({attributes:e,setAttributes:t,attributePrefix:r="block",title:n="",defaultValues:l={},maxBorderWidth:i=100,showBorderRadius:s=!0})=>{const c=r?e[`${r}BorderColor`]:e.borderColor,p=r?e[`${r}BorderWidth`]:e.borderWidth,u=r?e[`${r}BorderStyle`]:e.borderStyle,d=r?`${r}BorderRadius`:"borderRadius";return(0,o.createElement)(f.Fragment,null,(0,o.createElement)(b.SelectControl,{label:n,value:u,options:[{value:"none",label:(0,a.__)("None","fpf-framework")},{value:"solid",label:(0,a.__)("Solid","fpf-framework")},{value:"dotted",label:(0,a.__)("Dotted","fpf-framework")},{value:"dashed",label:(0,a.__)("Dashed","fpf-framework")},{value:"double",label:(0,a.__)("Double","fpf-framework")},{value:"groove",label:(0,a.__)("Groove","fpf-framework")},{value:"ridge",label:(0,a.__)("Ridge","fpf-framework")}],onChange:e=>{t(r?{[`${r}BorderStyle`]:e}:{borderStyle:e})}}),"none"!==u&&!!u&&(0,o.createElement)(f.Fragment,null,(0,o.createElement)(w,{value:c||"",defaultValue:l.color||"",label:(0,a.__)("Border color","fpf-framework"),disableAlpha:!1,onChange:e=>{t(r?{[`${r}BorderColor`]:e}:{borderColor:e})}}),(0,o.createElement)(b.RangeControl,{label:(0,a.__)("Border Width (px)","fpf-framework"),min:0,max:i,value:p,onChange:e=>{t(r?{[`${r}BorderWidth`]:e}:{borderWidth:e})},step:1,initialPosition:l.width||0,allowReset:!0})),s&&(0,o.createElement)(x,null,(r=>(0,o.createElement)(C,{label:(0,a.__)("Border Radius (px)","fpf-framework"),attributeKey:d,attributes:e,setAttributes:t,breakpoint:r,positions:["top_left","top_right","bottom_right","bottom_left"],positionsLabels:{top_left:`<div>${(0,a.__)("TOP","fpf-framework")}</div><div>${(0,a.__)("LEFT","fpf-framework")}</div>`,top_right:`<div>${(0,a.__)("TOP","fpf-framework")}</div><div>${(0,a.__)("RIGHT","fpf-framework")}</div>`,bottom_right:`<div>${(0,a.__)("BOTTOM","fpf-framework")}</div><div>${(0,a.__)("RIGHT","fpf-framework")}</div>`,bottom_left:`<div>${(0,a.__)("BOTTOM","fpf-framework")}</div><div>${(0,a.__)("LEFT","fpf-framework")}</div>`}}))))};N.propTypes=O;var B=N;const P={value:T().object.isRequired,onUpdate:T().func.isRequired},R=({value:e,onUpdate:t})=>{const{type:r,top:n,left:l,spread:i,color:s,width:c}=null!=e?e:{},p=r=>{t({...e,...r})};return(0,o.createElement)(f.Fragment,null,(0,o.createElement)(b.SelectControl,{label:(0,a.__)("Type","fpf-framework"),value:r,options:[{value:"none",label:(0,a.__)("None","fpf-framework")},{value:"outset",label:(0,a.__)("Outset","fpf-framework")},{value:"inset",label:(0,a.__)("Inset","fpf-framework")}],onChange:e=>{p({type:e})}}),"none"!==r&&!!r&&(0,o.createElement)(f.Fragment,null,(0,o.createElement)(w,{wrapperClass:"fpframework-gutenberg-p-t-0",value:s,defaultValue:"",label:(0,a.__)("Color","fpf-framework"),disableAlpha:!1,onChange:e=>{p({color:e})}}),(0,o.createElement)(b.RangeControl,{label:(0,a.__)("Blur (px)","fpf-framework"),min:0,max:100,value:c,onChange:e=>{p({width:e||0})},step:1,initialPosition:7,allowReset:!0}),(0,o.createElement)(b.RangeControl,{label:(0,a.__)("Spread (px)","fpf-framework"),min:0,max:100,value:i,onChange:e=>{p({spread:e||0})},step:1,initialPosition:0,allowReset:!0}),(0,o.createElement)(b.RangeControl,{label:(0,a.__)("Left (px)","fpf-framework"),min:-100,max:100,value:l,onChange:e=>{p({left:e||0})},step:1,initialPosition:0,allowReset:!0}),(0,o.createElement)(b.RangeControl,{label:(0,a.__)("Top (px)","fpf-framework"),min:-100,max:100,value:n,onChange:e=>{p({top:e||0})},step:1,initialPosition:0,allowReset:!0})))};R.propTypes=P;var $=R;const L=e=>{const t=e?.label||(0,a.__)("Unlock Pro Feature","firebox");return(0,o.createElement)("a",{href:"#","data-fpf-modal-item":e.feature,className:"fpf-button upgrade fpf-modal-opener fpframework-gutenberg-font-size-13","data-fpf-modal":"#fpfUpgradeToPro","data-fpf-plugin":e.plugin},(0,o.createElement)("svg",{className:"fpf-upgrade-icon lock-closed",xmlns:"http://www.w3.org/2000/svg",height:"18px",viewBox:"0 -960 960 960",width:"18px",fill:"#e8eaed"},(0,o.createElement)("path",{d:"M263.72-96Q234-96 213-117.15T192-168v-384q0-29.7 21.15-50.85Q234.3-624 264-624h24v-96q0-79.68 56.23-135.84 56.22-56.16 136-56.16Q560-912 616-855.84q56 56.16 56 135.84v96h24q29.7 0 50.85 21.15Q768-581.7 768-552v384q0 29.7-21.16 50.85Q725.68-96 695.96-96H263.72Zm.28-72h432v-384H264v384Zm216.21-120Q510-288 531-309.21t21-51Q552-390 530.79-411t-51-21Q450-432 429-410.79t-21 51Q408-330 429.21-309t51 21ZM360-624h240v-96q0-50-35-85t-85-35q-50 0-85 35t-35 85v96Zm-96 456v-384 384Z"})),(0,o.createElement)("svg",{className:"fpf-upgrade-icon lock-open",xmlns:"http://www.w3.org/2000/svg",height:"18px",viewBox:"0 -960 960 960",width:"18px",fill:"#e8eaed"},(0,o.createElement)("path",{d:"M264-624h336v-96q0-50-35-85t-85-35q-50 0-85 35t-35 85h-72q0-80 56.23-136 56.22-56 136-56Q560-912 616-855.84q56 56.16 56 135.84v96h24q29.7 0 50.85 21.15Q768-581.7 768-552v384q0 29.7-21.16 50.85Q725.68-96 695.96-96H263.72Q234-96 213-117.15T192-168v-384q0-29.7 21.15-50.85Q234.3-624 264-624Zm0 456h432v-384H264v384Zm216.21-120Q510-288 531-309.21t21-51Q552-390 530.79-411t-51-21Q450-432 429-410.79t-21 51Q408-330 429.21-309t51 21ZM264-168v-384 384Z"})),(0,o.createElement)("span",{className:"text"},t))};async function I(e){const t=await async function(e){if("string"!=typeof e)return(0,a.__)("Location must be a string.","firebox");if(""===e.trim())return(0,a.__)("Please enter a location.","firebox");const t="https://nominatim.openstreetmap.org/search?q="+e.split(" ").map((e=>encodeURIComponent(e))).join("+")+"&format=geojson",r=await fetch(t);return r.ok&&200===r.status?r.json():(0,a.__)("An error has occured: ","firebox")+r.status}(e);if(t?.features?.length){let e=[];return t.features.forEach((t=>{e.push({latitude:String(t.geometry.coordinates[1]),longitude:String(t.geometry.coordinates[0]),properties:t.properties})})),e}return[]}const A={markers:_().array.isRequired,dispatch:_().func.isRequired,openMarker:_().number,setOpenMarker:_().func},M=({markers:e=[],dispatch:t,openMarker:r,setOpenMarker:l})=>{const i=(0,f.useRef)(null),[s,c]=(0,f.useState)([]),[p,u]=(0,f.useState)(!1);(0,f.useEffect)((()=>{const e=e=>{i.current&&i.current.closest(".fpframework-repeater-block-control--item").dataset.index&&!i.current.contains(e.target)&&c([])};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[i]);const m=()=>{const e=d();t({type:le.ADD,marker:{id:e},dispatch:t}),l(e)},g=(r,o,a)=>{t({type:le.UPDATE,ids:[e[r].id],updatedProps:{[o]:a}})},k=(0,f.useMemo)((()=>(0,n.debounce)(h,300)),[]);async function h(e,t,r){if(""!==r.trim()){u(!0),c([]);let o=await I(r);u(!1),c({marker_id:t[e].id,locations:o})}else u(!1),c([])}return(0,o.createElement)("div",{className:"fpframework-repeater-block-control"},e.map(((n,d)=>(0,o.createElement)("div",{className:"fpframework-repeater-block-control--item",key:d,"data-index":d},(0,o.createElement)("div",{className:"fpframework-repeater-block-control--item--header"},(0,o.createElement)(b.Button,{className:"fpframework-repeater-block-control--item--header--label",onClick:()=>{return(e=n.id)===r&&(e=null),void l(e);var e}},n.label),(0,o.createElement)(b.Button,{className:"fpframework-repeater-block-control--item--header--remove_btn",onClick:()=>(r=>{t({type:le.REMOVE,ids:[e[r].id]})})(d)},(0,o.createElement)(b.Icon,{icon:"no-alt"}))),r===n.id&&(0,o.createElement)("div",{className:"fpframework-repeater-block-control--item--details"},(0,o.createElement)("div",{className:"components-base-control fpframework-repeater-block-control--item--details--address"},(0,o.createElement)(b.TextControl,{label:(0,a.__)("Address","firebox"),value:n.address,onChange:r=>(async(r,o,a)=>{t({type:le.UPDATE,ids:[e[r].id],updatedProps:{address:a}}),k(r,e,a)})(d,0,r)}),p&&(0,o.createElement)(b.Spinner,null),0!==s?.locations?.length&&s?.marker_id===n.id&&(0,o.createElement)("div",{className:"wp-block-map-search-results",ref:i},s.locations.map(((e,r)=>(0,o.createElement)("div",{className:"wp-block-map-search-results-item",key:r,onClick:()=>((e,r)=>{let o=s.locations[e]||!1;o&&(u(!1),c([]),t({type:le.UPDATE,ids:[r],updatedProps:{address:o?.properties?.display_name,label:o?.properties?.display_name,latitude:o.latitude,longitude:o.longitude}}))})(r,n.id)},e.properties.display_name))))),(0,o.createElement)(b.TextControl,{label:(0,a.__)("Latitude","firebox"),value:n.latitude,onChange:e=>g(d,"latitude",e)}),(0,o.createElement)(b.TextControl,{label:(0,a.__)("Longitude","firebox"),value:n.longitude,onChange:e=>g(d,"longitude",e)}),(0,o.createElement)(b.TextControl,{label:(0,a.__)("Label","firebox"),value:n.label,onChange:e=>g(d,"label",e)}),(0,o.createElement)(b.TextareaControl,{label:(0,a.__)("Description","firebox"),value:n.description,onChange:e=>g(d,"description",e)})))))," ",0===e.length&&(0,o.createElement)(b.Button,{variant:"primary",className:"fpframework-button-fullwidth",onClick:m},(0,a.__)("Add Marker","firebox")),1===e.length&&(0,o.createElement)(b.Disabled,null,(0,o.createElement)(b.Button,{variant:"primary",className:"fpframework-button-fullwidth",onClick:m},(0,a.__)("Add Marker","firebox"))),(0,o.createElement)("div",{className:"components-base-control fpframework-gutenberg-m-t-24"},(0,o.createElement)("div",{className:"fpframework-gutenberg-m-b-8"},(0,a.__)("Map Markers","firebox")),(0,o.createElement)("p",{className:"components-base-control"},(0,a.__)("Upgrade to add multiple markers.","firebox")),(0,o.createElement)(L,{feature:(0,a.__)("More Map Markers","firebox"),plugin:"FireBox"})),"")};M.propTypes=A;var D=M;const q={attributes:_().object.isRequired,setAttributes:_().func.isRequired,dispatch:_().func,openMarker:_().number,setOpenMarker:_().func},j=({attributes:e,setAttributes:t,dispatch:r,openMarker:l,setOpenMarker:i})=>{const{provider:s,latitude:c,longitude:p,scale:u,width:d,height:g,zoomControl:k,zoom:h,markers:v,backgroundColor:_,boxShadow:E}=e,y=[{label:(0,a.__)("OpenStreetMap","firebox"),value:"osm"},{label:(0,a.__)("Google Maps (Coming soon)","firebox"),value:"gmap",disabled:!0}],[S,T]=(0,f.useState)(""),O=(0,f.useRef)(null),[N,P]=(0,f.useState)([]),[R,A]=(0,f.useState)(!1);(0,f.useEffect)((()=>{const e=e=>{O.current&&!O.current.contains(e.target)&&P([])};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}}),[O]);const M=(0,f.useMemo)((()=>(0,n.debounce)(q,300)),[]);async function q(e){if(""!==e.trim()){A(!0),P([]);let t=await I(e);A(!1),P(t)}else A(!1),P([])}return(0,o.createElement)(m.InspectorControls,null,(0,o.createElement)(b.PanelBody,{title:(0,a.__)("Map","firebox"),initialOpen:!0},(0,o.createElement)(b.SelectControl,{label:(0,a.__)("Provider","firebox"),value:s,options:y,onChange:e=>t({provider:e})}),(0,o.createElement)("div",{className:"components-base-control fpframework-repeater-block-control--item--details--address"},(0,o.createElement)(b.TextControl,{label:(0,a.__)("Address","firebox"),value:S,onChange:e=>{T(e),M(e)},help:(0,a.__)("You can change the main location of your map by entering an address.","firebox")}),R&&(0,o.createElement)(b.Spinner,null),0!==N?.length&&(0,o.createElement)("div",{className:"wp-block-map-search-results",ref:O},N.map(((e,r)=>(0,o.createElement)("div",{className:"wp-block-map-search-results-item",key:r,onClick:()=>(e=>{let r=N[e]||!1;r&&(A(!1),P([]),t({latitude:r.latitude,longitude:r.longitude}),T(r?.properties?.display_name))})(r)},e.properties.display_name))))),(0,o.createElement)(b.TextControl,{label:(0,a.__)("Latitude","firebox"),value:c,onChange:e=>t({latitude:e})}),(0,o.createElement)(b.TextControl,{label:(0,a.__)("Longitude","firebox"),value:p,onChange:e=>t({longitude:e})}),(0,o.createElement)(b.__experimentalNumberControl,{label:(0,a.__)("Zoom","firebox"),className:"components-base-control",value:h,min:"1",max:"50",onChange:e=>t({zoom:e})}),(0,o.createElement)(x,null,(e=>(0,o.createElement)(b.__experimentalUnitControl,{label:(0,a.__)("Width","firebox"),value:d[e],onChange:r=>t({width:{...d,[e]:r}})}))),(0,o.createElement)(x,null,(e=>(0,o.createElement)(b.__experimentalUnitControl,{label:(0,a.__)("Height","firebox"),value:g[e],onChange:r=>t({height:{...g,[e]:r}})})))),(0,o.createElement)(b.PanelBody,{title:(0,a.__)("Controls","firebox"),initialOpen:!1},(0,o.createElement)(b.ToggleControl,{label:(0,a.__)("Zoom Control","firebox"),default:!0,checked:k,onChange:e=>t({zoomControl:e})})," ",(0,o.createElement)("div",{className:"components-base-control fpframework-gutenberg-m-t-24"},(0,o.createElement)("div",{className:"fpframework-gutenberg-m-b-8"},(0,a.__)("Scale","firebox")),(0,o.createElement)("p",{className:"components-base-control"},(0,a.__)("Select whether to have a map scale in metric or imperial system.","firebox")),(0,o.createElement)(L,{feature:(0,a.__)("Scale","firebox"),plugin:"FireBox"})),""),(0,o.createElement)(b.PanelBody,{title:(0,a.__)("Markers","firebox"),initialOpen:!1},(0,o.createElement)(D,{markers:v,dispatch:r,openMarker:l,setOpenMarker:i})),(0,o.createElement)(b.PanelBody,{title:(0,a.__)("Block","firebox"),initialOpen:!1},(0,o.createElement)(x,null,(r=>(0,o.createElement)(C,{label:(0,a.__)("Margin (px)","firebox"),attributeKey:"margin",attributes:e,setAttributes:t,breakpoint:r}))),(0,o.createElement)(x,null,(r=>(0,o.createElement)(C,{label:(0,a.__)("Padding (px)","firebox"),attributeKey:"padding",attributes:e,setAttributes:t,breakpoint:r})))),(0,o.createElement)(b.PanelBody,{title:(0,a.__)("Colors","firebox"),initialOpen:!1},(0,o.createElement)(w,{label:(0,a.__)("Background Color","firebox"),value:_,onChange:e=>t({backgroundColor:e})})),(0,o.createElement)(b.PanelBody,{title:(0,a.__)("Border","firebox"),initialOpen:!1},(0,o.createElement)(B,{attributes:e,setAttributes:t,attributePrefix:""})),(0,o.createElement)(b.PanelBody,{title:(0,a.__)("Box Shadow","firebox"),initialOpen:!1},(0,o.createElement)(x,null,(e=>(0,o.createElement)($,{value:E[e],onUpdate:r=>t({boxShadow:{...E,[e]:r}})})))))};j.propTypes=q;var U=j,z=e=>`block-${e}`;const W=e=>!!e&&Object.values(e).some((e=>null!=e&&""!==e)),V={desktop:"",tablet:991,mobile:575},Z=(e=[])=>{if(!e||!e.length)return[];const t=e.reduce(((e,t)=>{const r=(e=>{if(!e)return"";const t=e.match(/[^{\}]+(?=})/gi)[0];return{selector:e.replace(t,"").replace("{","").replace("}","").trim(),style:t.trim()}})(t),o=e.find((({selector:e})=>e===r.selector));return o?(o.styles.push(r.style),e):(e.push({selector:r.selector,styles:[r.style]}),e)}),[]);return t.map((e=>`${e.selector} { ${e.styles.join(" ")} }`))},H=e=>({...e,rules:Z(e.rules)}),F=({id:e,value:t,rule:r,unit:o="",edgeCase:n,breakpoint:l="desktop",oneline:i=!1})=>{if(null==t||""===t)return null;let s=r.includes("[BLOCK_ID]")?r.replace("[BLOCK_ID]",e):`${r}`;if((e=>["box-shadow"].some((t=>e.includes(t))))(r))return["inset","outset"].includes(t.type)&&""!==t.color?(0,a.sprintf)(s,`${t.left}px ${t.top}px ${t.width}px ${t.spread}px ${"outset"===t.type?"":t.type} ${t.color}`):null;if((e=>["text-shadow"].some((t=>e.includes(t))))(r))return""!==t.hpos&&""!==t.vpos&&""!==t.blur&&""!==t.color?(0,a.sprintf)(s,`${t.hpos}px ${t.vpos}px ${t.blur}px ${t.color}`):null;if((e=>["padding","border-radius","margin","position-items"].some((t=>e.includes(t)))&&!["padding-","margin-"].some((t=>e.includes(t))))(r)){let e=r.match(/margin|border-radius|padding|position-items/gi)[0];if("position-items"===e){const e=["top","right","bottom","left"].map((e=>{if(null!=t[e]&&""!==t[e])return`${e}: ${"auto"===t[e]?"auto":`${t[e]}${o}`};`})).join(" ");return e.trim()?(c=` ${e} `,s.replace(/[^{\}]+(?=})/gi,c)):null}{const r=((e,t,r="",o=!1)=>{if(!e)return!1;if(W(e)||W(e[t])){const a=e[t]||e;if(["margin","padding"].includes(r)){if(4===Object.values(a).length&&1===new Set(Object.values(a)).size)return`${a.top}px`;if(Object.values(a).every((e=>""!==e))){if(a.top===a.bottom&&a.left===a.right)return`${a.top||0}px ${a.left||0}px`;Object.values(a).map((function(e){return`${e||0}px`})).join(" ")}let e=[],t=["top","right","bottom","left"];return o?(t.forEach((t=>{e.push(`${a[t]||0}px`)})),e.join(" ")):(t.forEach((t=>{""!==a[t]&&e.push(r+"-"+t+":"+a[t]+"px;")})),e)}if("border-radius"===r){if(4===Object.values(a).length&&1===new Set(Object.values(a)).size)return`${a.top_left}px`;if(Object.values(a).every((e=>""!==e))){if(a.top_left===a.bottom_right&&a.bottom_left===a.top_right)return`${a.top_left||0}px ${a.bottom_left||0}px`;Object.values(a).map((function(e){return`${e||0}px`})).join(" ")}let e=[],t=["top_left","top_right","bottom_right","bottom_left"];return o?(t.forEach((t=>{e.push(`${a[t]||0}px`)})),e.join(" ")):(t.forEach((t=>{""!==a[t]&&e.push("border-"+t.replace("_","-")+"-radius:"+a[t]+"px;")})),e)}}return!1})(t,null,e,i);if(!r)return null;if(r&&"string"==typeof r)return(0,a.sprintf)(s,r)||null;if(r&&"object"==typeof r)return s=s.replace("margin: ",""),s=s.replace("padding: ",""),s=s.replace("border-radius: ",""),s=s.replace("%s;","%s"),(0,a.sprintf)(s,r.join(""))||null}}var c;if((e=>!!e&&"object"==typeof e&&"url"in e&&"attachment"in e&&"repeat"in e)(t)){if(!t.url)return;const e=[`background-image: ${"none"!==t.url?`url(${t.url})`:"none"};`,`background-repeat: ${t.repeat};`,`background-size: ${t.size};`,`background-position: ${t.position};`,`background-attachment: ${t.attachment};`].join(" ");return(0,a.sprintf)(s,e)}if(n){const e=n.find((({edge:e})=>e===t));if(e)return""===e.value||e.skipInBreakpoints&&e.skipInBreakpoints.includes(l)?null:(o=e.unit||"",(0,a.sprintf)(s,`${e.value}${o}`))}return(0,a.sprintf)(s,`${t}${o}`)},Q=e=>f.Children.toArray(e).map((e=>Array.isArray(e.props.children)?Q(e.props.children):e)).reduce(((e,t)=>Array.isArray(t)?[...e,...t]:[...e,t]),[]).filter((e=>e.type&&"Rule"===e.type.displayName)),K={children:T().oneOfType([T().node,T().array]),id:T().string},G=({id:e="",children:t})=>{const r=(({id:e,children:t,getCSSRule:r,mapper:o=(e=>e)})=>{const a=[{name:"desktop",media:"max",width:V.desktop,rules:[]},{name:"tablet",media:"max",width:V.tablet,rules:[]},{name:"mobile",media:"max",width:V.mobile,rules:[]},{name:"desktop-only",media:"min",width:V.tablet+1,rules:[]},{name:"tablet-only",media:"min",width:V.mobile+1,rules:[]}];return Q(t).reduce(((t,o)=>{const{value:a,rule:n,unit:l,edgeCase:i,breakpointLimit:s,oneline:c}=o.props;if(null==a)return t;if("object"!=typeof a||!("desktop"in a)){const o=t.find((({name:e})=>"desktop"===e)),s=r({id:e,value:a,rule:n,unit:l,edgeCase:i,breakpoint:"desktop",oneline:c});return null!=s&&o.rules.push(s),t}return Object.keys(a).forEach((o=>{const p=t.find((({name:e})=>s&&"mobile"!==o?`${o}-only`===e:e===o)),u=r({id:e,value:a[o],rule:n,unit:l,edgeCase:i,breakpoint:o,oneline:c});null!=u&&p&&p.rules.push(u)})),t}),a).map(o)})({id:e,children:t,getCSSRule:F,mapper:H});return(e=>e.every((e=>0===e.rules.length)))(r)?null:(0,o.createElement)("style",{dangerouslySetInnerHTML:{__html:(a=r,a.reduce(((e,t)=>{if(!t.rules.length)return e;const r=t.rules.map((e=>e.trim())).join("\n");return t.width?"tablet-only"===t.name?`${e}\n\n\t\t\t\t@media (min-width: ${V.mobile+1}px) and (max-width: ${V.tablet}px) {\n\t\t\t\t\t${r}\n\t\t\t\t}\n\t\t\t\t`:`${e}\n\n\t\t\t@media (${t.media}-width: ${t.width}px) {\n\t\t\t\t${r}\n\t\t\t}\n\t\t\t`:`${e}${r}\n`}),"").trim())}});var a};G.propTypes=K;var Y=G;const J={value:T().oneOfType([T().string,T().number,T().object]).isRequired,rule:T().string.isRequired,unit:T().oneOf(["","px","%","em","rem","vh","vw","pt","cm","mm"]),edgeCase:T().arrayOf(T().shape({edge:T().any.isRequired,value:T().oneOfType([T().string,T().number]).isRequired,skipInBreakpoints:T().array})),breakpointLimit:T().bool,oneline:T().bool},X=()=>null;X.displayName="Rule",X.propTypes=J;var ee=X;const te=({attributes:e,prefix:t="block"})=>{const r=(({attributes:e,prefix:t="block"})=>{const r=t?`${t}BorderColor`:"borderColor",o=e&&r in e?e[r]:null,a=t?`${t}BorderWidth`:"borderWidth",n=e&&a in e?e[a]:null,l=t?`${t}BorderStyle`:"borderStyle",i=e&&l in e?e[l]:null;return i&&"none"!==i?{borderColor:o||void 0,borderStyle:"none"!==i&&i?i:void 0,borderWidth:null!=n?`${n}px`:void 0}:{borderColor:void 0,borderStyle:void 0,borderWidth:void 0}})({attributes:e,prefix:t});return r.borderWidth&&r.borderStyle&&r.borderColor?`${r.borderWidth} ${r.borderStyle} ${r.borderColor}`:""},re={attributes:_().object.isRequired,children:_().node},oe=({attributes:e,children:t})=>{const{uniqueId:r,margin:a,padding:n,width:l,height:i,borderRadius:s,backgroundColor:c}=e,p=z(r);return(0,o.createElement)(Y,{id:p},(0,o.createElement)(ee,{value:a,rule:".wp-block-firebox-map.[BLOCK_ID] { margin: %s; }",unit:"px"}),(0,o.createElement)(ee,{value:n,rule:".wp-block-firebox-map.[BLOCK_ID] { padding: %s; }",unit:"px"}),(0,o.createElement)(ee,{value:c,rule:".wp-block-firebox-map.[BLOCK_ID] { --background-color: %s; }"}),(0,o.createElement)(ee,{value:l,rule:".wp-block-firebox-map.[BLOCK_ID] { --width: %s; }"}),(0,o.createElement)(ee,{value:i,rule:".wp-block-firebox-map.[BLOCK_ID] { --height: %s; }"}),(0,o.createElement)(ee,{value:te({attributes:e,prefix:""}),rule:".wp-block-firebox-map.[BLOCK_ID] { --border: %s; }",unit:""}),(0,o.createElement)(ee,{value:s,rule:".wp-block-firebox-map.[BLOCK_ID] { --border-radius: %s; }",oneline:!0}),(({attributes:e,selector:t=""})=>(0,o.createElement)(ee,{value:e.boxShadow,rule:t+" { box-shadow: %s !important; }",unit:""}))({attributes:e,selector:".wp-block-firebox-map.[BLOCK_ID]"}),t)};oe.propTypes=re;var ae=oe,ne=()=>(0,o.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,o.createElement)("path",{fill:"white",d:"M29 25H32.8977C33.5839 25 34.2222 25.3518 34.5886 25.932L44.0623 40.932C44.9034 42.2638 43.9465 44 42.3713 44H5.62865C4.05354 44 3.09658 42.2638 3.93768 40.932L13.4114 25.932C13.7778 25.3518 14.4161 25 15.1023 25H19",stroke:"#2438E9",strokeWidth:"3",strokeLinecap:"round"}),(0,o.createElement)("path",{fill:"white",d:"M34 13C34 17.5611 27.1795 28.2296 24.8041 31.8068C24.4171 32.3895 23.5829 32.3895 23.1959 31.8068C20.8205 28.2296 14 17.5611 14 13C14 7.47715 18.4772 3 24 3C29.5228 3 34 7.47715 34 13Z",stroke:"#2438E9",strokeWidth:"3",strokeLinecap:"round"}),(0,o.createElement)("circle",{cx:"24",cy:"13",r:"4",fill:"#2438E9"}));const le={ADD:"ADD",REMOVE:"REMOVE",REMOVE_ALL:"REMOVE_ALL",UPDATE:"UPDATE",INIT:"INIT"};(0,t.registerBlockType)("firebox/map",{icon:ne,edit:({className:e,attributes:t,setAttributes:r,clientId:l})=>{const{uniqueId:i,provider:s,markers:c,width:p,height:u,latitude:k,longitude:v,scale:_,zoomControl:w,zoom:E}=t,{addUniqueID:y}=(0,g.useDispatch)("firebox/data"),{isUniqueID:x,isUniqueBlock:C,parentData:S}=(0,g.useSelect)((e=>({isUniqueID:t=>e("firebox/data").isUniqueID(t),isUniqueBlock:(t,r)=>e("firebox/data").isUniqueBlock(t,r),parentData:{rootBlock:e("core/block-editor").getBlock(e("core/block-editor").getBlockHierarchyRootClientId(l)),postId:e("core/editor")?.getCurrentPostId()?e("core/editor")?.getCurrentPostId():"",reusableParent:e("core/block-editor").getBlockAttributes(e("core/block-editor").getBlockParentsByBlockName(l,"core/block").slice(-1)[0]),editedPostId:!!e("core/edit-site")&&e("core/edit-site").getEditedPostId()}})),[l]);(0,f.useEffect)((()=>{const e=function(e){const{postId:t,reusableParent:r,editedPostId:o}=e,a=function(e,t,r="block-unknown"){return(0,n.has)(t,"ref")?t.ref:e||r}(t,r,0);return 0===a&&o?function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0}(o)%1e6:a}(S);let o=function(e,t,r,o,a="",l=!1){const i=e&&2===e.split("_").length,s=(a?a+"_":"")+t.substr(2,9);return!e||i&&e.split("_")[0]!==a.toString()?r(s)?s:(0,n.uniqueId)(s):r(e)||o(e,t)?e:l?(0,n.uniqueId)(s):s}(i,l,x,C,e);o!==i?(t.uniqueId=o,r({uniqueId:o}),y(o,l)):(r({uniqueId:i}),y(i,l))}),[]);const T=(0,f.useRef)(null),[O,N]=(0,f.useState)(null),[B,P]=(0,f.useState)(""),[R,$]=(0,f.useState)(!1),[L,A]=(0,f.useState)(!1),[M,D]=(0,f.useState)(!1),[q,j]=(0,f.useState)([]),[W,V]=(0,f.useState)(!1),[Z,H]=(0,f.useState)(""===k&&""===v),[F,Q]=(0,f.useState)(null),[K,G]=(0,f.useState)(null),Y=z(i),J={provider:s,latitude:k,longitude:v,markers:c,scale:_,zoomControl:w,zoom:E},X=(e,t)=>{if(window.L&&O&&t&&e){var r,o,n,l,i,s;null!==(r=e.id)&&void 0!==r||(e.id=d()),null!==(o=e.latitude)&&void 0!==o||(e.latitude=O.getCenter().lat),null!==(n=e.longitude)&&void 0!==n||(e.longitude=O.getCenter().lng),null!==(l=e.label)&&void 0!==l||(e.label=(0,a.__)("Untitled Marker","firebox")),null!==(i=e.address)&&void 0!==i||(e.address=""),null!==(s=e.description)&&void 0!==s||(e.description="");const c=window.L.marker([e.latitude,e.longitude]||0,{draggable:!0});return c.on("movestart",(()=>{c.closeTooltip(),c.closePopup()})),c.on("moveend",(()=>{const r=c.getLatLng();t({type:le.UPDATE,ids:[e.id],updatedProps:{latitude:r.lat,longitude:r.lng}})})),c.on("click",(()=>{G(e.id),c.closeTooltip()})),c.on("mouseover",(()=>{""!==e.label&&c.openTooltip()})),c.markerProps=e,c}return null},[ee,te]=(0,f.useReducer)(((e,t)=>{switch(t.type){case le.ADD:const r=X(t.marker,t.dispatch);return[...e,r];case le.REMOVE_ALL:return e.map((e=>{O.removeLayer(e)})),[];case le.REMOVE:return e.filter((({markerProps:e})=>t.ids.includes(e.id))).forEach((e=>{O.hasLayer(e)&&O.removeLayer(e)})),e.filter((({markerProps:e})=>!t.ids.includes(e.id)));case le.INIT:return[...t.markers.map((e=>X(e,t.dispatch)))];case le.UPDATE:return e.map((e=>{const r=e.markerProps;return t.ids.includes(r.id)&&(e.markerProps=(0,n.merge)(e.markerProps,t.updatedProps)),e}));default:console.warn((0,a.__)("The action for the leaflet block do not have a defined action in marker's reducer: ","firebox")+t.type)}return e}),[],(()=>[]));(0,f.useEffect)((()=>{Z?($(!1),A(!1)):setTimeout((()=>{(()=>{if(!T.current&&!window.L)return;let{L:e}=window;if(!e)return;T.current.querySelector(".inner").innerHTML="";const t=e.map(T.current.querySelector(".inner"),{gestureHandling:!0,gestureHandlingOptions:{text:{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use ⌘ + scroll to zoom the map"}}});e.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:["a","b","c"]}).addTo(t),t.on("zoom",(()=>{r({zoom:t.getZoom()})})),t.on("moveend",(()=>{const e=t.getCenter();r({latitude:e.lat.toString(),longitude:e.lng.toString()})})),N(t),te({type:le.INIT,markers:c,dispatch:te}),R&&te({type:le.REMOVE_ALL,dispatch:te}),L&&te({type:le.ADD,marker:L,dispatch:te})})()}),5)}),[Z]),(0,f.useEffect)((()=>{O&&(w?(O.addControl(O.zoomControl),O.touchZoom.enable(),O.doubleClickZoom.enable(),O.scrollWheelZoom.enable(),O.boxZoom.enable(),O.keyboard.enable()):(O.removeControl(O.zoomControl),O.touchZoom.disable(),O.doubleClickZoom.disable(),O.scrollWheelZoom.disable(),O.boxZoom.disable(),O.keyboard.disable()))}),[w,O]),(0,f.useEffect)((()=>{k&&v&&O&&O.setView([k,v],E||5)}),[k,v,E,O]),(0,f.useEffect)((()=>{p&&u&&O&&O.invalidateSize(!0)}),[p,u,O]),(0,f.useEffect)((()=>{if(O&&(F&&(O.removeControl(F),Q(null)),_)){let e={};"imperial"===_?(e.imperial=!0,e.metric=!1):(e.imperial=!1,e.metric=!0);let t=window.L.control.scale(e).addTo(O);Q(t)}}),[_,O]),(0,f.useEffect)((()=>{ee&&(ee.forEach((e=>{O.hasLayer(e)||O.addLayer(e);const{markerProps:t}=e;e.setLatLng([t.latitude,t.longitude]),e.closeTooltip(),e.unbindTooltip(),""!==t.label&&e.bindTooltip(t.label,{direction:"auto"}),e.closePopup(),e.unbindPopup(),""===t.label&&""===t.description||e.bindPopup((e=>{const t=document.createElement("div");t.classList.add("wp-block-map-marker-container");const r=document.createElement("h6");if(r.classList.add("wp-block-map-marker-label"),r.innerHTML=e.label,t.appendChild(r),""!==e.description){const r=document.createElement("div");r.classList.add("wp-block-map-marker-content");const o=document.createElement("p");o.innerHTML=e.description,r.appendChild(o),t.appendChild(r)}return t})(t))})),c.length!==ee.length&&O&&r({markers:ee.map((({markerProps:e})=>e))}))}),[ee,O,c]),(0,f.useEffect)((()=>{const e=setTimeout((async()=>{if(""!==B.trim()){V(!0),j([]);let e=await I(B);V(!1),j(e),D(!0)}else V(!1),j([]),D(!1)}),150);return()=>clearTimeout(e)}),[B]);const re=()=>{H(!1),V(!1),D(!1),j([]),""===k&&""===v&&(r({latitude:38.76406464903202,longitude:25.157077798040934}),A({id:d(),latitude:38.76406464903202,longitude:25.157077798040934,label:"Greece",address:"Greece",description:""}))},oe=()=>{H(!1),V(!1),D(!1),j([])};if(Z){const t=(0,m.useBlockProps)({id:Y,className:h()(e,Y,{"wp-block":!0})});return(0,o.createElement)("div",{...t},(0,o.createElement)(b.Placeholder,{icon:ne,label:(0,a.__)("FireBox Map Block"),className:"wp-block-map-startup",instructions:(0,a.__)("Enter an address or coordinates to create your map.","firebox")},(0,o.createElement)("form",null,(0,o.createElement)("input",{type:"text",className:"components-placeholder__input",placeholder:(0,a.__)("Type an address or coordinates...","firebox"),onChange:e=>P(e.target.value),autoComplete:"off"}),W&&(0,o.createElement)(b.Spinner,null),""===k&&""===v&&(0,o.createElement)(b.Button,{onClick:re},(0,a.__)("Skip","firebox")),""!==k&&""!==v&&(0,o.createElement)(b.Button,{onClick:oe},(0,a.__)("Cancel","firebox")),M&&0!==q?.length&&(0,o.createElement)("div",{className:"wp-block-map-search-results"},q.map(((e,t)=>(0,o.createElement)("div",{className:"wp-block-map-search-results--item",key:t,onClick:()=>(e=>{let t=q[e]||!1;t&&(H(!1),V(!1),D(!1),j([]),""===k&&""===v&&r({latitude:t.latitude,longitude:t.longitude}),A({id:d(),latitude:t.latitude,longitude:t.longitude,label:t?.properties?.display_name,address:t?.properties?.display_name,description:""}),$(!0))})(t)},e.properties.display_name)))))))}const ie=(0,m.useBlockProps)();return(0,o.createElement)("div",{...ie},(0,o.createElement)(ae,{attributes:t}),(0,o.createElement)("div",{id:Y,className:h()(e,Y,"fpf-map-widget","wp-block-firebox-map"),"data-options":JSON.stringify(J),ref:T},(0,o.createElement)("div",{className:"inner"})),(0,o.createElement)(U,{attributes:t,setAttributes:r,setEditing:H,dispatch:te,openMarker:K,setOpenMarker:G,map:O}))},save:({attributes:e,className:t})=>{const{uniqueId:r,provider:a,latitude:n,longitude:l,scale:i,markers:s,zoomControl:c,zoom:p}=e,u=z(r),d={provider:a,latitude:n,longitude:l,scale:i,markers:s,zoomControl:c,zoom:p};return(0,o.createElement)(f.Fragment,null,(0,o.createElement)(ae,{attributes:e}),(0,o.createElement)("div",{id:u,className:h()(t,u,"wp-block-firebox-map","fpf-map-widget"),"data-options":JSON.stringify(d)},(0,o.createElement)("div",{className:"inner"})))}})}()}();